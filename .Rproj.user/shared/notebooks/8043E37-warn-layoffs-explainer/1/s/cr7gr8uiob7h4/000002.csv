"0",""
"0","# define parent url"
"0","parent_url <- ""https://www.azjobconnection.gov/ada/"""
"0",""
"0","# define data frame"
"0","row_data <- tibble("
"0","  "
"0","  page_num = character( ),"
"0","  row_num = numeric( ),"
"0","  full_link = character( ),"
"0","  company = character( ),"
"0","  co_hq_city = character( ),"
"0","  co_hq_zip = character( ),"
"0","  labor_area = character( ),"
"0","  notice_date_txt = character( )"
"0","  "
"0",")"
"0",""
"0","# iterate through 16 html pages"
"0","for ( p in 1:17 ) {"
"0","  "
"0","  # parse page items"
"0","  my_html = read_html( paste0 (""warn_listing/page"", sprintf( ""%03d"", p ), "".html"" ) )"
"0","  "
"0","  all_rows <- html_nodes( my_html, xpath = '//div[2]/table/tr' )"
"0","  "
"0","  n = length( all_rows )"
"0","  "
"0","  data_rows = all_rows[ 3:n ]"
"0","  "
"0","  new_start_row <- ( (p-1) * 25 + 1 ) "
"0","  "
"0","  num_data_rows <- length( data_rows )"
"0","  "
"0","  # parse data_rows - begins at a multiple of 25 (plus 1)"
"0","  for ( i in 1:num_data_rows ) {"
"0","  "
"0","    j <- new_start_row + i - 1"
"0","    "
"0","    row_data[ j, 1 ] <- paste0 (""page"", sprintf( ""%03d"", p ), "".html"")"
"0","      "
"0","    row_data[ j, 2 ] <- j"
"0","      "
"0","    # quick two-step URL extraction"
"0","    row_url <- html_node( data_rows[ i ], xpath = ""td[1]/span/a/@href"" ) %>% html_text( )"
"0","    row_data[ j, 3 ]  <- paste0( parent_url, str_extract( row_url, ""^.{16}(id=)\\d{1,4}"" ) )"
"0","      "
"0","    row_data[ j, 4 ] <- html_node( data_rows[ i ], xpath = ""td[1]"" ) %>% html_text( )"
"0","      "
"0","    row_data[ j, 5 ] <- html_node( data_rows[ i ], xpath = ""td[2]"" ) %>% html_text( )"
"0","      "
"0","    row_data[ j, 6 ] <- html_node( data_rows[ i ], xpath = ""td[3]"" ) %>% html_text( )"
"0","      "
"0","    row_data[ j, 7 ] <- html_node( data_rows[ i ], xpath = ""td[4]"" ) %>% html_text( )"
"0","      "
"0","    row_data[ j, 8 ] <- html_node( data_rows[ i ], xpath=""td[5]"" ) %>% html_text( )"
"0","      "
"0","  "
"0","  } "
"0","  "
"0","  # ta-da!"
"0","  "
"0","}"
"0",""
